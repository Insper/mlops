<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
      
        <title>Iac terraform intro - MLOps & Interviews</title>
      
    
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed:700|Oxygen+Mono|Source+Sans+Pro:700|Source+Serif+Pro&amp;display=swap">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <script>
      // SETUP GLOBAL CONSTANTS
      var base_url = '../../..';
      
      var telemetryEnabled = false;
      var backendUrl = "";
      var courseSlug = "";
      
      
      var dashboardEnabled = false;
      var tagTree = {};
      

      // SETUP PLUGIN
      window.initialized = false;
      if (!window.initializers) window.initializers = [];
      window.registerInitializer = (initialize) => {
        if (window.initialized) initialize();
        else window.initializers.push(initialize);
      };
    </script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="https://unpkg.com/hyperscript.org"></script>
    <script src="https://unpkg.com/htmx.org@1.8.4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="../../../assets/js/main.js"></script>
    
    <link rel="stylesheet" href="../../../css/termynal.css"><link rel="stylesheet" href="../../../css/custom.css">
  </head>
  <body>
    <div class="ah-main-container">
      <header class="ah-header">
        <button class="ah-menu-btn ah-button ah-button--borderless"
                aria-label="toggle menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/>
</svg>
        </button>
        <a href="../../.."
           title="MLOps &amp; Interviews"
           class="ah-logo"
           aria-label="MLOps & Interviews">
          MLOps &amp; Interviews
        </a>
        <div class="ah-header--right">
          
          
          
          <button id="resetHandoutButton">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
</svg></span>
          </button>
          

          
        </div>
      </header>
      <nav class="ah-navigation preload">
        <div class="ah-nav-container">
          <button class="ah-menu-btn ah-button ah-button--borderless close-menu"
                  aria-label="close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/>
</svg>
          </button>
          <ul class="ah-nav-body">
            
              
  
    <li>
      <a href="../../..">Home</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../about/">About</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../deadlines/">Deadlines</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../contributions/">Contributions</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../project/project/">Project</a>
    </li>
  

            
              
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">APS</span>
    <ul>
      
        
  
    <li>
      <a href="../../01-intro/aps01_part_1/">APS 01 Part 1</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01_part_2/">APS 01 Part 2</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/aps02_sql/">APS 02 SQL</a>
    </li>
  

      
        
  
    <li>
      <a href="../aps03_lambda/">APS 03 Lambda</a>
    </li>
  

      
    </ul>
  </li>

            
              
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Classes</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">01 - Introduction</span>
    <ul>
      
        
  
    <li>
      <a href="../../01-intro/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01_part_1/">APS 01 Part 1</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01_part_2/">APS 01 Part 2</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">02 - Deploy: first try!</span>
    <ul>
      
        
  
    <li>
      <a href="../../02-api/api_deploy/">Api deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">03 - Batch prediction</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/data_formats/">Data formats</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/practicing/">Practicing</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/sql/">Sql</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/db_tool/">Db tool</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/dot_env/">Dot env</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/aps02_sql/">APS 02 SQL</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">04 - Interview 01</span>
    <ul>
      
        
  
    <li>
      <a href="../../04-int01/faq/">Faq</a>
    </li>
  

      
        
  
    <li>
      <a href="../../04-int01/int01/">Int01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">05 - Docker</span>
    <ul>
      
        
  
    <li>
      <a href="../../05-docker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/s3/">S3</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/docker/">Docker</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">06 - Message Broker</span>
    <ul>
      
        
  
    <li>
      <a href="../../06-message-broker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../06-message-broker/rabbitmq/">Rabbitmq</a>
    </li>
  

      
        
  
    <li>
      <a href="../../06-message-broker/celery/">Celery</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">07 - Lambda Functions</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../aws_lambda/">Aws lambda</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_practicing/">Lambda practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../api_gateway/">Api gateway</a>
    </li>
  

      
        
  
    <li>
      <a href="../sentiment_analysis/">Sentiment analysis</a>
    </li>
  

      
        
  
    <li>
      <a href="../sa_lambda_function/">Sa lambda function</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_layer/">Lambda layer</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../lambda_quotas/">Lambda quotas</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_and_docker/">Lambda and docker</a>
    </li>
  

      
        
  

    <li class="active ah-togglable-item opened">
      <span class="ah-togglable-handle">Iac terraform intro</span>
      <ul>
        
          
            
            
              <li class="ah-toc-item">
                <a href="#introduction">Introduction</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#why-iac-for-mlops">Why IaC for MLOps?</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#iac-tools">IaC Tools</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#terraform-overview">Terraform Overview</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#setting-up-the-environment">Setting Up the Environment</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#getting-started-with-terraform-s3-bucket-experiment">Getting Started with Terraform: S3 Bucket Experiment</a>
              </li>
            
        
      </ul>
    </li>
  

      
        
  
    <li>
      <a href="../iac_terraform_sentiment/">Iac terraform sentiment</a>
    </li>
  

      
        
  
    <li>
      <a href="../aps03_lambda/">APS 03 Lambda</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">08 - Queues</span>
    <ul>
      
        
  
    <li>
      <a href="../../08-queue/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/concurrent_execution/">Concurrent execution</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_practicing/">Sqs practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_and_lambda/">Sqs and lambda</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">09 - Interview 02</span>
    <ul>
      
        
  
    <li>
      <a href="../../09-int02/int02/">Int02</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">10 - Documentation</span>
    <ul>
      
        
  
    <li>
      <a href="../../10-documentation/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/code_documentation/">Code documentation</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/fast_api_docs/">Fast api docs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/ml_canvas/">Ml canvas</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">11 - Logging</span>
    <ul>
      
        
  
    <li>
      <a href="../../11-logging/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/python_logging/">Python logging</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/read_aws_logs/">Read aws logs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/write_logs_to_s3/">Write logs to s3</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">12 - CI/CD</span>
    <ul>
      
        
  
    <li>
      <a href="../../12-ci-cd/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/testing/">Testing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/auto_deploy/">Auto deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">13 - Tracking</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../13-tracking/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../13-tracking/mlflow/">Mlflow</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../13-tracking/centralization/">Centralization</a>
    </li>
  

      
        
  
    <li>
      <a href="../../13-tracking/model_registry/">Model registry</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">14 - Interview 03</span>
    <ul>
      
        
  
    <li>
      <a href="../../14-int03/int03/">Int03</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">15 - Monitoring</span>
    <ul>
      
        
  
    <li>
      <a href="../../15-monitoring/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/metrics/">Metrics</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/model_degradation/">Model degradation</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/data_drift_methods/">Data drift methods</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/data_drift_ml/">Data drift ml</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/performance_degradation/">Performance degradation</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">16 - Data versioning</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../16-data-versioning/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../16-data-versioning/dvc/">Dvc</a>
    </li>
  

      
        
  
    <li>
      <a href="../../16-data-versioning/s3_storage/">S3 storage</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
    </ul>
  </li>

            
          </ul>
        </div>
      </nav>
      <main class="ah-content ah-typeset">
        
          <div class="ah-title-box">
            <ul class="ah-breadcrumbs">
              
                
                  
                    <li>Classes</li>
                  
                
                  
                    <li>07 - Lambda Functions</li>
                  
                
                  
                    <li>Part 2</li>
                  
                
                <li></li>
            </ul>
            
            
          </div>
          
            <section class="progress-section show">
<h1 id="infrastructure-as-code-iac">Infrastructure as Code (IaC)</h1>
<h2 id="introduction">Introduction</h2>
<p><strong>Infrastructure as Code</strong> (<strong>IaC</strong>) is a key practice in modern cloud computing and DevOps that allows you to manage and <strong>provision computing infrastructure</strong> through machine-readable definition files, rather than through physical hardware configuration or <strong>interactive configuration tools</strong>.</p>
<div class="admonition info">
<p class="admonition-title">What is IaC?</p>
<p>Infrastructure as Code treats infrastructure the same way developers treat application code:</p>
<ul>
<li><strong>Version controlled</strong>: Infrastructure definitions are stored in version control systems</li>
<li><strong>Reproducible</strong>: The same infrastructure can be created multiple times with identical results</li>
<li><strong>Automated</strong>: Infrastructure deployment and management can be automated</li>
<li><strong>Testable</strong>: Infrastructure changes can be tested before being applied to production</li>
</ul>
</div>
<h2 id="why-iac-for-mlops">Why IaC for MLOps?</h2>
<p>In MLOps, IaC becomes crucial for several reasons:</p>
<ul>
<li><strong>Consistency</strong>: Ensure that development, staging, and production environments are more consistent</li>
<li><strong>Scalability</strong>: Easily replicate infrastructure for different models or experiments</li>
<li><strong>Collaboration</strong>: Teams can collaborate on infrastructure changes through code reviews</li>
<li><strong>Disaster Recovery</strong>: Quickly rebuild infrastructure from code definitions</li>
<li><strong>Cost Control</strong>: Track and manage cloud resources more effectively</li>
</ul>
<h2 id="iac-tools">IaC Tools</h2>
<p>Several tools can be used for IaC:</p>
<ul>
<li><strong>AWS CloudFormation</strong>: Native AWS service for infrastructure provisioning</li>
<li><strong>AWS CDK</strong>: Code-based approach using familiar programming languages</li>
<li><strong>AWS SAM</strong>: Simplified approach specifically for serverless applications</li>
<li><strong>Pulumi</strong>: Modern IaC using real programming languages</li>
<li><strong>Terraform</strong>: Popular multi-cloud IaC tool</li>
<li><strong>OpenTofu</strong>: Community-driven fork of Terraform</li>
</ul>
<div class="admonition info">
<p class="admonition-title">OpenTofu: Fun Fact!</p>
<p>A few years ago, HashiCorp decided to change Terraform's license to a more restrictive model, which raised concerns about the project's freedom and sustainability.</p>
<p>In response, the community created an open fork to maintain collaboration and ensure transparency in development.</p>
<p>Initially called OpenTF and later renamed to <a href="https://opentofu.org/"><strong>OpenTofu</strong></a>, the project became maintained by the <em>Linux Foundation</em>, ensuring open governance and compatibility with Terraform.</p>
<p>Thus, it became a free and reliable alternative for users and companies that depend on <strong>IaC</strong>.</p>
</div>
<p>For this class, we'll focus on <strong>Terraform</strong> as it's widely adopted across the industry and provides excellent multi-cloud support.</p>
<h2 id="terraform-overview">Terraform Overview</h2>
<p><a href="https://developer.hashicorp.com/terraform"><strong>Terraform</strong></a> is an open-source infrastructure as code software tool created by HashiCorp. It enables users to define and provision infrastructure using a declarative configuration language.</p>
<p>Key benefits of Terraform:</p>
<ul>
<li><strong>Multi-cloud</strong>: Works with AWS, Azure, GCP, and many other providers</li>
<li><strong>Declarative</strong>: Describe what you want, not how to get there</li>
<li><strong>State Management</strong>: Tracks infrastructure state and manages changes</li>
<li><strong>Plan and Apply</strong>: Preview changes before applying them</li>
<li><strong>Modular</strong>: Create reusable modules for common patterns</li>
</ul>
<h2 id="setting-up-the-environment">Setting Up the Environment</h2>
<h3 id="install-terraform">Install Terraform</h3>
<p>Install the latest version of Terraform following the instructions for your operating system:</p>
<div class="admonition note">
<p class="admonition-title">Extra</p>
<p>If needed, access more information directly on the <a href="https://developer.hashicorp.com/terraform/install">Terraform</a> website.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Linux (Ubuntu/Debian)</label><label for="__tabbed_1_2">macOS</label><label for="__tabbed_1_3">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="termy">
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>gnupg<span class="w"> </span>software-properties-common
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>$<span class="w"> </span>wget<span class="w"> </span>-O-<span class="w"> </span>https://apt.releases.hashicorp.com/gpg<span class="w"> </span><span class="p">|</span><span class="w"> </span>gpg<span class="w"> </span>--dearmor<span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/usr/share/keyrings/hashicorp-archive-keyring.gpg<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>$<span class="w"> </span>gpg<span class="w"> </span>--no-default-keyring<span class="w"> </span>--keyring<span class="w"> </span>/usr/share/keyrings/hashicorp-archive-keyring.gpg<span class="w"> </span>--fingerprint
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;deb [arch=</span><span class="k">$(</span>dpkg<span class="w"> </span>--print-architecture<span class="k">)</span><span class="s2"> signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com </span><span class="k">$(</span>grep<span class="w"> </span>-oP<span class="w"> </span><span class="s1">&#39;(?&lt;=UBUNTU_CODENAME=).*&#39;</span><span class="w"> </span>/etc/os-release<span class="w"> </span><span class="o">||</span><span class="w"> </span>lsb_release<span class="w"> </span>-cs<span class="k">)</span><span class="s2"> main&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/etc/apt/sources.list.d/hashicorp.list
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>$<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>$<span class="w"> </span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>terraform
</code></pre></div>
</div>
</div>
<div class="tabbed-block">
<div class="termy">
<div class="language-bash highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>brew<span class="w"> </span>tap<span class="w"> </span>hashicorp/tap
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>$<span class="w"> </span>brew<span class="w"> </span>install<span class="w"> </span>hashicorp/tap/terraform
</code></pre></div>
</div>
</div>
<div class="tabbed-block">
<ol>
<li>Download the Terraform binary from <a href="https://developer.hashicorp.com/terraform/install">https://developer.hashicorp.com/terraform/install</a></li>
<li>Extract the ZIP file to a directory (e.g., <code>C:\terraform</code>)</li>
<li>Add the directory to the system PATH <a href="https://www.wikihow.com/Change-the-PATH-Environment-Variable-on-Windows">Tutorial 1</a> <a href="https://www.eukhost.com/kb/how-to-add-to-the-path-on-windows-10-and-windows-11/">Tutorial 2</a></li>
</ol>
</div>
</div>
</div>
<p>Verify the installation:</p>
<p>
<div class="termy">

<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>version
</code></pre></div>

</div>
</p>

<h3 id="configure-aws-profile">Configure AWS Profile</h3>
<p>Make sure you have AWS credentials configured. Set the AWS profile for the session:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:3"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><input id="__tabbed_2_3" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Linux/Mac</label><label for="__tabbed_2_2">Windows PowerShell</label><label for="__tabbed_2_3">Windows CMD</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">AWS_PROFILE</span><span class="o">=</span>mlops
</code></pre></div>
<p></div>
</p></p>
</div>
<div class="tabbed-block">
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="gp">$ </span><span class="nv">$env</span>:AWS_PROFILE<span class="o">=</span><span class="s2">&quot;mlops&quot;</span>
</code></pre></div>
<p></div>
</p></p>
</div>
<div class="tabbed-block">
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="gp">$ </span><span class="nb">set</span><span class="w"> </span><span class="nv">AWS_PROFILE</span><span class="o">=</span>mlops
</code></pre></div>
<p></div>
</p></p>
</div>
</div>
</div>
<p>Verify your AWS configuration:</p>
<p>
<div class="termy">

<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="gp">$ </span>aws<span class="w"> </span>sts<span class="w"> </span>get-caller-identity<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>

</div>
</p>

<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_1" id="exercise_1_0">
<p class="admonition-title">Question 1</p>
<form class="exercise-form">
<p>Before we start, make sure you have:</p>
<ol>
<li><strong>AWS CLI</strong> configured with appropriate credentials</li>
<li><strong>Docker</strong> installed and running</li>
<li><strong>Terraform</strong> installed</li>
</ol>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h2 id="getting-started-with-terraform-s3-bucket-experiment">Getting Started with Terraform: S3 Bucket Experiment</h2>
<p>Before diving into a more complex project, let's start with a simple Terraform experiment to understand the basics.</p>
<h3 id="create-s3-bucket-experiment">Create S3 Bucket Experiment</h3>
<p>Let's create a simple S3 bucket using Terraform to understand the workflow.</p>
<p>
<div class="termy">

<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="gp">$ </span>mkdir<span class="w"> </span>terraform-s3-experiment
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>terraform-s3-experiment
</code></pre></div>

</div>
</p>

<h3 id="basic-terraform-configuration-for-s3">Basic Terraform Configuration for S3</h3>
<p>In Terraform, the <code>main.tf</code> file is where we define our infrastructure resources.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_2" id="exercise_2_0">
<p class="admonition-title">Question 2</p>
<form class="exercise-form">
<p>Create a file <code>main.tf</code> with the following content:</p>
<div class="language-hcl highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Configure the AWS Provider</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">terraform</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nb">required_providers</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="nb">aws</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">      </span><span class="na">source</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hashicorp/aws&quot;</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">      </span><span class="na">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;~&gt; 5.0&quot;</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="p">}</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="kr">provider</span><span class="w"> </span><span class="nv">&quot;aws&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">  </span><span class="na">region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nv">var.aws_region</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">  </span><span class="na">profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.aws_profile</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="p">}</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="c1"># Random ID for unique bucket naming</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;random_id&quot;</span><span class="w"> </span><span class="nv">&quot;bucket_suffix&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">  </span><span class="na">byte_length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">8</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="p">}</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="c1"># S3 Bucket</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket&quot;</span><span class="w"> </span><span class="nv">&quot;experiment_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${var.bucket_prefix}-${var.student_id}-${random_id.bucket_suffix.hex}&quot;</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">  </span><span class="nb">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">    </span><span class="na">Name</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Terraform Experiment Bucket&quot;</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">    </span><span class="na">Environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;learning&quot;</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="na">StudentId</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="nv">var.student_id</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a><span class="w">    </span><span class="na">CreatedBy</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Terraform&quot;</span>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="p">}</span>
<a id="__codelineno-8-32" name="__codelineno-8-32" href="#__codelineno-8-32"></a>
<a id="__codelineno-8-33" name="__codelineno-8-33" href="#__codelineno-8-33"></a><span class="c1"># S3 Bucket versioning</span>
<a id="__codelineno-8-34" name="__codelineno-8-34" href="#__codelineno-8-34"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_versioning&quot;</span><span class="w"> </span><span class="nv">&quot;experiment_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-35" name="__codelineno-8-35" href="#__codelineno-8-35"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.id</span>
<a id="__codelineno-8-36" name="__codelineno-8-36" href="#__codelineno-8-36"></a><span class="w">  </span><span class="nb">versioning_configuration</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-37" name="__codelineno-8-37" href="#__codelineno-8-37"></a><span class="w">    </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>
<a id="__codelineno-8-38" name="__codelineno-8-38" href="#__codelineno-8-38"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-39" name="__codelineno-8-39" href="#__codelineno-8-39"></a><span class="p">}</span>
<a id="__codelineno-8-40" name="__codelineno-8-40" href="#__codelineno-8-40"></a>
<a id="__codelineno-8-41" name="__codelineno-8-41" href="#__codelineno-8-41"></a><span class="c1"># S3 Bucket encryption</span>
<a id="__codelineno-8-42" name="__codelineno-8-42" href="#__codelineno-8-42"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_server_side_encryption_configuration&quot;</span><span class="w"> </span><span class="nv">&quot;experiment_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-43" name="__codelineno-8-43" href="#__codelineno-8-43"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.id</span>
<a id="__codelineno-8-44" name="__codelineno-8-44" href="#__codelineno-8-44"></a>
<a id="__codelineno-8-45" name="__codelineno-8-45" href="#__codelineno-8-45"></a><span class="w">  </span><span class="nb">rule</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-46" name="__codelineno-8-46" href="#__codelineno-8-46"></a><span class="w">    </span><span class="nb">apply_server_side_encryption_by_default</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-47" name="__codelineno-8-47" href="#__codelineno-8-47"></a><span class="w">      </span><span class="na">sse_algorithm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AES256&quot;</span>
<a id="__codelineno-8-48" name="__codelineno-8-48" href="#__codelineno-8-48"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-49" name="__codelineno-8-49" href="#__codelineno-8-49"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-8-50" name="__codelineno-8-50" href="#__codelineno-8-50"></a><span class="p">}</span>
<a id="__codelineno-8-51" name="__codelineno-8-51" href="#__codelineno-8-51"></a>
<a id="__codelineno-8-52" name="__codelineno-8-52" href="#__codelineno-8-52"></a><span class="c1"># S3 Bucket public access block</span>
<a id="__codelineno-8-53" name="__codelineno-8-53" href="#__codelineno-8-53"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_public_access_block&quot;</span><span class="w"> </span><span class="nv">&quot;experiment_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-54" name="__codelineno-8-54" href="#__codelineno-8-54"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.id</span>
<a id="__codelineno-8-55" name="__codelineno-8-55" href="#__codelineno-8-55"></a>
<a id="__codelineno-8-56" name="__codelineno-8-56" href="#__codelineno-8-56"></a><span class="w">  </span><span class="na">block_public_acls</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-8-57" name="__codelineno-8-57" href="#__codelineno-8-57"></a><span class="w">  </span><span class="na">block_public_policy</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-8-58" name="__codelineno-8-58" href="#__codelineno-8-58"></a><span class="w">  </span><span class="na">ignore_public_acls</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-8-59" name="__codelineno-8-59" href="#__codelineno-8-59"></a><span class="w">  </span><span class="na">restrict_public_buckets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">true</span>
<a id="__codelineno-8-60" name="__codelineno-8-60" href="#__codelineno-8-60"></a><span class="p">}</span>
</code></pre></div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="variables-configuration-for-s3-experiment">Variables Configuration for S3 Experiment</h3>
<p>The <code>variables.tf</code> file is where we define the input variables for our Terraform configuration.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_3" id="exercise_3_0">
<p class="admonition-title">Question 3</p>
<form class="exercise-form">
<p>Create a file <code>variables.tf</code>:</p>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>You don't need to modify the <code>variables.tf</code> file for this experiment!</p>
</div>
<div class="language-hcl highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;aws_region&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AWS region for resources&quot;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-2&quot;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="p">}</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;aws_profile&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AWS profile to use&quot;</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mlops&quot;</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="p">}</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;student_id&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Unique student identifier&quot;</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="w">  </span><span class="nb">validation</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">    </span><span class="na">condition</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="nf">can</span><span class="p">(</span><span class="nf">regex</span><span class="p">(</span><span class="s2">&quot;^[a-z0-9-]+$&quot;</span><span class="p">,</span><span class="w"> </span><span class="nv">var.student_id</span><span class="p">))</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">    </span><span class="na">error_message</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Student ID must contain only lowercase letters, numbers, and hyphens.&quot;</span>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="p">}</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="kr">variable</span><span class="w"> </span><span class="nv">&quot;bucket_prefix&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Prefix for the S3 bucket name&quot;</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">  </span><span class="na">type</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="kt">string</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">  </span><span class="na">default</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;terraform-experiment&quot;</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="p">}</span>
</code></pre></div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="variable-values-for-s3-experiment">Variable Values for S3 Experiment</h3>
<p>We can define the variable values in a separate file called <code>terraform.tfvars</code>.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_4" id="exercise_4_0">
<p class="admonition-title">Question 4</p>
<form class="exercise-form">
<p>Create a file <code>terraform.tfvars</code>:</p>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>Replace <code>student_id</code> with your unique identifier (e.g., your username)</p>
</div>
<div class="language-hcl highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="c1"># AWS Configuration</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="na">aws_region</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;us-east-2&quot;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="na">aws_profile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;mlops&quot;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="c1"># Student Configuration (REQUIRED - Make this unique!)</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="na">student_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;your-username-here&quot;</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="c1"># Bucket Configuration</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="na">bucket_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;terraform-experiment&quot;</span>
</code></pre></div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="outputs-configuration-for-s3-experiment">Outputs Configuration for S3 Experiment</h3>
<p>The <code>outputs.tf</code> file is where we define the output values for our Terraform configuration.</p>
<p>The output values are used to extract information from the resources created by Terraform.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_5" id="exercise_5_0">
<p class="admonition-title">Question 5</p>
<form class="exercise-form">
<p>Create a file <code>outputs.tf</code>:</p>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>You don't need to modify the <code>outputs.tf</code> file for this experiment!</p>
</div>
<div class="language-hcl highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kr">output</span><span class="w"> </span><span class="nv">&quot;bucket_name&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Name of the created S3 bucket&quot;</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.bucket</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">}</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="kr">output</span><span class="w"> </span><span class="nv">&quot;bucket_arn&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ARN of the created S3 bucket&quot;</span>
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="w">  </span><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.arn</span>
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="p">}</span>
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="kr">output</span><span class="w"> </span><span class="nv">&quot;bucket_region&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Region of the created S3 bucket&quot;</span>
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a><span class="w">  </span><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.region</span>
<a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="p">}</span>
<a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a>
<a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="kr">output</span><span class="w"> </span><span class="nv">&quot;student_id&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a><span class="w">  </span><span class="na">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Student identifier for this deployment&quot;</span>
<a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="w">  </span><span class="na">value</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="nv">var.student_id</span>
<a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="p">}</span>
</code></pre></div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="deploy-the-s3-bucket">Deploy the S3 Bucket</h3>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_6" id="exercise_6_0">
<p class="admonition-title">Question 6</p>
<form class="exercise-form">
<p>Now let's deploy our first Terraform infrastructure:</p>
<p><p>
<strong>Step 1: Initialize Terraform</strong>
The <code>terraform init</code> command is used to initialize a Terraform working directory.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>init
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 2: Validate the configuration</strong>
The <code>terraform validate</code> command is used to validate the Terraform configuration files in a directory.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>validate
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 3: Format the configuration</strong>
The <code>terraform fmt</code> command is used to format Terraform configuration files to a canonical format and style.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>fmt
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 4: Plan the deployment</strong>
The <code>terraform plan</code> command is used to create an <strong>execution plan</strong>, showing what actions Terraform will take to change the infrastructure.</p>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>It won't make any changes to your infrastructure, just show you what will happen.</p>
</div>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>plan
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 5: Apply the configuration</strong></p>
<p>When we run the <code>terraform apply</code> command, Terraform will create the resources defined in the configuration files.</p>
<p>This means that the S3 bucket will be created in your AWS account.</p>
<div class="admonition warning">
<p class="admonition-title">Warning!</p>
<p>Type <code>yes</code> when prompted to confirm the deployment.</p>
</div>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>apply
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="verify-s3-bucket-creation">Verify S3 Bucket Creation</h3>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_7" id="exercise_7_0">
<p class="admonition-title">Question 7</p>
<form class="exercise-form">
<p>After the deployment completes, verify your bucket was created using AWS CLI:</p>
<p><p>
<strong>Step 1: View Terraform outputs</strong></p>
<p>Let's check the outputs from our Terraform deployment.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>output
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 2: List all S3 buckets and filter for yours</strong></p>
<p>To show your S3 buckets, use the following command:</p>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>Not all buckets were created by Terraform.</p>
<p>Some may exist from previous classes!</p>
</div>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>ls<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 3: Filter buckets by your student ID</strong></p>
<p>To filter the S3 buckets by your student ID, use the following command:</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>list-buckets<span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;Buckets[?contains(Name, &#39;</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>student_id<span class="k">)</span><span class="s2">&#39;)].{Name:Name,CreationDate:CreationDate}&quot;</span><span class="w"> </span>--output<span class="w"> </span>table<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
<p></div>
</p></p>
<p><p>
<strong>Step 4: Get detailed information about your bucket</strong>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>head-bucket<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>get-bucket-location<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>get-bucket-versioning<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>get-bucket-encryption<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="test-s3-bucket-functionality">Test S3 Bucket Functionality</h3>
<p>Let's test our bucket by uploading and downloading a file:</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_8" id="exercise_8_0">
<p class="admonition-title">Question 8</p>
<form class="exercise-form">
<p>Create a simple text file to upload to our <strong>S3 bucket</strong>.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hello from Terraform experiment!&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>test-file.txt
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Student ID: </span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>student_id<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>test-file.txt
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Bucket Name: </span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>test-file.txt
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Created on: </span><span class="k">$(</span>date<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>test-file.txt
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a><span class="gp">$ </span>cat<span class="w"> </span>test-file.txt
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_9" id="exercise_9_0">
<p class="admonition-title">Question 9</p>
<form class="exercise-form">
<p>Upload the file to <strong>S3</strong></p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>cp<span class="w"> </span>test-file.txt<span class="w"> </span>s3://<span class="nv">$BUCKET_NAME</span>/test-file.txt<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_10" id="exercise_10_0">
<p class="admonition-title">Question 10</p>
<form class="exercise-form">
<p>List bucket contents</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>ls<span class="w"> </span>s3://<span class="nv">$BUCKET_NAME</span>/<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_11" id="exercise_11_0">
<p class="admonition-title">Question 11</p>
<form class="exercise-form">
<p>Download the file with a new name</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>cp<span class="w"> </span>s3://<span class="nv">$BUCKET_NAME</span>/test-file.txt<span class="w"> </span>downloaded-file.txt<span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="gp">$ </span>cat<span class="w"> </span>downloaded-file.txt
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="understanding-terraform-state">Understanding Terraform State</h3>
<p>Now, we are going to explore Terraform state management.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_12" id="exercise_12_0">
<p class="admonition-title">Question 12</p>
<form class="exercise-form">
<p>View the state file:</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>show
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_13" id="exercise_13_0">
<p class="admonition-title">Question 13</p>
<form class="exercise-form">
<p>List resources in state:</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>state<span class="w"> </span>list
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_14" id="exercise_14_0">
<p class="admonition-title">Question 14</p>
<form class="exercise-form">
<p>View specific resource details:</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>state<span class="w"> </span>show<span class="w"> </span>aws_s3_bucket.experiment_bucket
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="make-changes-and-update">Make Changes and Update</h3>
<p>Let's modify our infrastructure to understand how Terraform handles changes.</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_15" id="exercise_15_0">
<p class="admonition-title">Question 15</p>
<form class="exercise-form">
<p>Add a lifecycle rule to the bucket</p>
<p>Update your <code>main.tf</code> file by adding this resource after the existing S3 bucket resources:</p>
<div class="language-hcl highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="c1"># S3 Bucket lifecycle configuration</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_bucket_lifecycle_configuration&quot;</span><span class="w"> </span><span class="nv">&quot;experiment_bucket&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.experiment_bucket.id</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="w">  </span><span class="nb">rule</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">    </span><span class="na">id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;delete_old_versions&quot;</span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">    </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">    </span><span class="nb">filter</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">      </span><span class="na">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="w">    </span><span class="nb">noncurrent_version_expiration</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="w">      </span><span class="na">noncurrent_days</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">30</span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="w">  </span><span class="nb">rule</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="w">    </span><span class="na">id</span><span class="w">     </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;delete_incomplete_multipart_uploads&quot;</span>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="w">    </span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a>
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a><span class="w">    </span><span class="nb">filter</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-23" name="__codelineno-28-23" href="#__codelineno-28-23"></a><span class="w">      </span><span class="na">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<a id="__codelineno-28-24" name="__codelineno-28-24" href="#__codelineno-28-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-25" name="__codelineno-28-25" href="#__codelineno-28-25"></a>
<a id="__codelineno-28-26" name="__codelineno-28-26" href="#__codelineno-28-26"></a><span class="w">    </span><span class="nb">abort_incomplete_multipart_upload</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-27" name="__codelineno-28-27" href="#__codelineno-28-27"></a><span class="w">      </span><span class="na">days_after_initiation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span>
<a id="__codelineno-28-28" name="__codelineno-28-28" href="#__codelineno-28-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-29" name="__codelineno-28-29" href="#__codelineno-28-29"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-28-30" name="__codelineno-28-30" href="#__codelineno-28-30"></a><span class="p">}</span>
</code></pre></div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise text short tag-short-text tag-text-exercise editable" data-slug="classes/07-lambda/iac_terraform_intro/short_1" id="short_1_0">
<p class="admonition-title">Question 16<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Plan the changes. Which resources are being created or modified?</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>plan
</code></pre></div>
</div>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Submit"/>
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_16" id="exercise_16_0">
<p class="admonition-title">Question 17</p>
<form class="exercise-form">
<p>Apply the changes.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>apply
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_17" id="exercise_17_0">
<p class="admonition-title">Question 18</p>
<form class="exercise-form">
<p>Verify the lifecycle configuration.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>get-bucket-lifecycle-configuration<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<h3 id="clean-up-s3-experiment">Clean Up S3 Experiment</h3>
<p>When you're ready to move to the next experiment, clean up these resources!</p>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_18" id="exercise_18_0">
<p class="admonition-title">Question 19</p>
<form class="exercise-form">
<p>Remove test files from bucket.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>rm<span class="w"> </span>s3://<span class="nv">$BUCKET_NAME</span>/test-file.txt<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_19" id="exercise_19_0">
<p class="admonition-title">Question 20</p>
<form class="exercise-form">
<p>Remove all objects and versions from bucket (required for versioned buckets).</p>
<p><div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>bucket_name<span class="k">)</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>delete-objects<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--delete<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>aws<span class="w"> </span>s3api<span class="w"> </span>list-object-versions<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--query<span class="o">=</span><span class="s1">&#39;{Objects: Versions[].{Key:Key,VersionId:VersionId}}&#39;</span><span class="w"> </span>--profile<span class="w"> </span>mlops<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>delete-objects<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--delete<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>aws<span class="w"> </span>s3api<span class="w"> </span>list-object-versions<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--query<span class="o">=</span><span class="s1">&#39;{Objects: DeleteMarkers[].{Key:Key,VersionId:VersionId}}&#39;</span><span class="w"> </span>--profile<span class="w"> </span>mlops<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div></p>
<div class="admonition warning">
<p class="admonition-title">Alternative: Manual Bucket Cleanup</p>
<p>If <code>terraform output</code> is not available or if you need to clean up manually, you can use these commands instead:</p>
<div class="admonition warning">
<p class="admonition-title">Attention</p>
<p>Replace <code>BUCKET_NAME</code> with your actual bucket name</p>
</div>
<p><div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>ls<span class="w"> </span>--profile<span class="w"> </span>mlops<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>terraform-experiment
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="gp">$ </span><span class="nv">BUCKET_NAME</span><span class="o">=</span><span class="s2">&quot;terraform-experiment-your-student-id-xxxxxxxx&quot;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>delete-objects<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--delete<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>aws<span class="w"> </span>s3api<span class="w"> </span>list-object-versions<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--query<span class="o">=</span><span class="s1">&#39;{Objects: Versions[].{Key:Key,VersionId:VersionId}}&#39;</span><span class="w"> </span>--profile<span class="w"> </span>mlops<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>delete-objects<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--delete<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>aws<span class="w"> </span>s3api<span class="w"> </span>list-object-versions<span class="w"> </span>--bucket<span class="w"> </span><span class="nv">$BUCKET_NAME</span><span class="w"> </span>--query<span class="o">=</span><span class="s1">&#39;{Objects: DeleteMarkers[].{Key:Key,VersionId:VersionId}}&#39;</span><span class="w"> </span>--profile<span class="w"> </span>mlops<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span>--profile<span class="w"> </span>mlops
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="gp">$ </span>aws<span class="w"> </span>s3<span class="w"> </span>rb<span class="w"> </span>s3://<span class="nv">$BUCKET_NAME</span><span class="w"> </span>--force<span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div></p>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_20" id="exercise_20_0">
<p class="admonition-title">Question 21</p>
<form class="exercise-form">
<p>Destroy the infrastructure.</p>
<div class="admonition warning">
<p class="admonition-title">Bucket Not Empty Error</p>
<p>If you get a <em>"BucketNotEmpty"</em> error during <code>terraform destroy</code>, it means there are still objects or versions in the bucket.</p>
<p>Use the commands above to remove all objects and versions before running <code>terraform destroy</code> again.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>Type <code>yes</code> when prompted to confirm the destruction.</p>
</div>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="gp">$ </span>terraform<span class="w"> </span>destroy
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="classes/07-lambda/iac_terraform_intro/exercise_21" id="exercise_21_0">
<p class="admonition-title">Question 22</p>
<form class="exercise-form">
<p>Verify bucket deletion.</p>
<div class="termy">
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>list-buckets<span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;Buckets[?contains(Name, &#39;</span><span class="k">$(</span>terraform<span class="w"> </span>output<span class="w"> </span>-raw<span class="w"> </span>student_id<span class="k">)</span><span class="s2">&#39;)]&quot;</span><span class="w"> </span>--profile<span class="w"> </span>mlops
</code></pre></div>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Submit" value="Mark as done" />
</div>
</form>
</div>
<p>Now, you can go to the next activity!</p>


</section>
          
        
      </main>
      <footer class="ah-footer ah-typeset">
        <div class="ah-footer-nav">
          
            <a href="../lambda_and_docker/"
               class="ah-prev"
               title="Lambda and docker">
              <span class="nav-label">Previous</span>
              <span class="nav-title">Lambda and docker</span>
            </a>
          
          
            <a href="../iac_terraform_sentiment/"
               class="ah-next"
               title="Iac terraform sentiment">
              <span class="nav-label">Next</span>
              <span class="nav-title">Iac terraform sentiment</span>
            </a>
          
        </div>
      </footer>
    </div>
    
      <script src="../../../js/tabs.js"></script><script src="../../../js/termynal.js"></script><script src="../../../js/custom.js"></script>
    
  </body>
</html>