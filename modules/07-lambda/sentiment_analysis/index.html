<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
      
        <title>Sentiment analysis - MLOps & Interviews</title>
      
    
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed:700|Oxygen+Mono|Source+Sans+Pro:700|Source+Serif+Pro&amp;display=swap">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <script>
      // SETUP GLOBAL CONSTANTS
      var base_url = '../../..';
      
      var telemetryEnabled = false;
      var backendUrl = "";
      var courseSlug = "";
      
      
      var dashboardEnabled = false;
      var tagTree = {};
      

      // SETUP PLUGIN
      window.initialized = false;
      if (!window.initializers) window.initializers = [];
      window.registerInitializer = (initialize) => {
        if (window.initialized) initialize();
        else window.initializers.push(initialize);
      };
    </script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="https://unpkg.com/hyperscript.org"></script>
    <script src="https://unpkg.com/htmx.org@1.8.4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="../../../assets/js/main.js"></script>
    
    <link rel="stylesheet" href="../../../css/termynal.css">
  </head>
  <body>
    <div class="ah-main-container">
      <header class="ah-header">
        <button class="ah-menu-btn ah-button ah-button--borderless"
                aria-label="toggle menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/>
</svg>
        </button>
        <a href="../../.."
           title="MLOps &amp; Interviews"
           class="ah-logo"
           aria-label="MLOps & Interviews">
          MLOps &amp; Interviews
        </a>
        <div class="ah-header--right">
          
          
          
          <button id="resetHandoutButton">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
</svg></span>
          </button>
          

          
        </div>
      </header>
      <nav class="ah-navigation preload">
        <div class="ah-nav-container">
          <button class="ah-menu-btn ah-button ah-button--borderless close-menu"
                  aria-label="close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/>
</svg>
          </button>
          <ul class="ah-nav-body">
            
              
  
    <li>
      <a href="../../..">Home</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../about/">About</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../deadlines/">Deadlines</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../contributions/">Contributions</a>
    </li>
  

            
              
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Content</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">01 - Introduction</span>
    <ul>
      
        
  
    <li>
      <a href="../../01-intro/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01/">Aps01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">02 - Deploy: first try!</span>
    <ul>
      
        
  
    <li>
      <a href="../../02-api/api_deploy/">Api deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">03 - Batch prediction</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/data_formats/">Data formats</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/practicing/">Practicing</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/sql/">Sql</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/db_tool/">Db tool</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/dot_env/">Dot env</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/aps02_sql/">Aps02 sql</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">04 - Interview 01</span>
    <ul>
      
        
  
    <li>
      <a href="../../04-int01/faq/">Faq</a>
    </li>
  

      
        
  
    <li>
      <a href="../../04-int01/int01/">Int01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">05 - Docker</span>
    <ul>
      
        
  
    <li>
      <a href="../../05-docker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/s3/">S3</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/docker/">Docker</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">06 - Message Broker</span>
    <ul>
      
        
  
    <li>
      <a href="../../06-message-broker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../06-message-broker/rabbitmq/">Rabbitmq</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">07 - Lambda Functions</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../aws_lambda/">Aws lambda</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_practicing/">Lambda practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../api_gateway/">Api gateway</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  

    <li class="active ah-togglable-item opened">
      <span class="ah-togglable-handle">Sentiment analysis</span>
      <ul>
        
          
            
            
              <li class="ah-toc-item">
                <a href="#remembering">Remembering</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#sentiment-analysis_1">Sentiment Analysis</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#textblob-library">Textblob library</a>
              </li>
            
        
      </ul>
    </li>
  

      
        
  
    <li>
      <a href="../sa_lambda_function/">Sa lambda function</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_layer/">Lambda layer</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 3</span>
    <ul>
      
        
  
    <li>
      <a href="../lambda_quotas/">Lambda quotas</a>
    </li>
  

      
        
  
    <li>
      <a href="../lambda_and_docker/">Lambda and docker</a>
    </li>
  

      
        
  
    <li>
      <a href="../aps03_lambda/">Aps03 lambda</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
    </ul>
  </li>

            
          </ul>
        </div>
      </nav>
      <main class="ah-content ah-typeset">
        
          <div class="ah-title-box">
            <ul class="ah-breadcrumbs">
              
                
                  
                    <li>Content</li>
                  
                
                  
                    <li>07 - Lambda Functions</li>
                  
                
                  
                    <li>Part 2</li>
                  
                
                <li></li>
            </ul>
            
            
          </div>
          
            <section class="progress-section show">
<h1 id="sentiment-analysis">Sentiment Analysis</h1>
<h2 id="remembering">Remembering</h2>
<p><a href="../aws_lambda/">In the last class</a> we saw how to build <a href="../aws_lambda/#aws-lambda_1"><strong>Lambda functions</strong></a> in AWS.</p>
<p>We chose the <a href="../api_gateway/"><strong>API Gateway</strong></a> service to expose our Lambda functions. Thus, the function is triggered whenever the user makes a request to an endpoint.</p>
<p><img alt="" src="../api_gateway_lambda.png" /></p>
<div class="admonition info">
<p class="admonition-title">Info!</p>
<p>AWS Lambda allows machine learning models to be deployed and hosted serverlessly.</p>
</div>
<p>Looking back at the examples we did, they involved a <a href="../lambda_practicing/#create-function"><em>function that returned a fixed JSON</em></a> and a lambda function that <a href="../api_gateway/#practicing"><em>counted the number of words in a sentence</em></a>. No ML for now!</p>
<p>Let's use this class to build more complex examples using AWS Lambda!</p>
<div>
<div class="ah-progress-container"><button class="ah-button ah-button--primary progress" id="prog-0"> Click to continue </button></div>
</div>
</section>
<section class="progress-section">
<h2 id="sentiment-analysis_1">Sentiment Analysis</h2>
<p>Sentiment analysis (<strong>SA</strong>) is the process of determining whether a given phrase is positive, negative or neutral.</p>
<p>It can be applied to analyze feedback, reviews, survey responses, social media posts and more to gauge public opinion on certain topics.</p>
<div class="admonition exercise long tag-text-exercise tag-long-text editable" data-slug="modules/07-lambda/sentiment_analysis/long_1" id="long_1_0">
<p class="admonition-title">Question 1<button class="editable-button"></button></p>
<form class="exercise-form">
<p>How can we represent the <strong>sentiment</strong> of a text as a <strong>variable</strong> in a database?</p>
<div class="form-elements">
<div class="grow-wrap"><textarea name="data"></textarea></div>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>We can represent it as a <strong>continuous score</strong>, for example, in the range <code>[-1,1]``, where</code>-1.0<code>represents a very negative text and</code>1.0` represents a very positive text.</p>
<p>Another option is to use <strong>categorical variables</strong>, such as:</p>
<ul>
<li>Very negative</li>
<li>Negative</li>
<li>Neutral</li>
<li>Positive</li>
<li>Very positive</li>
</ul>
</div>
</div>
<div class="admonition exercise long tag-text-exercise tag-long-text editable" data-slug="modules/07-lambda/sentiment_analysis/long_2" id="long_2_0">
<p class="admonition-title">Question 2<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Is it possible to predict the sentiment of a sentence without using ML algorithms? Can you think of any way?</p>
<div class="form-elements">
<div class="grow-wrap"><textarea name="data"></textarea></div>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>One of the simplest ways is to create fixed rules. For example, count how many times a word like <code>disappointed</code> occurs in text. A high occurrence may indicate negativity!</p>
<p>Another way is to create two lists of words: one of <em>negative</em> words and another of <em>positive</em> words. We count how many words we have from each list in the sentence we are analyzing, and if we have more positive words, we say the text has positive sentiment, otherwise we say it has negative sentiment.</p>
<p>Furthermore, we can ask an expert to provide weights for words, for example, <code>hate</code> could have a weight of <code>-0.9</code> while <code>cool</code> could have a weight of <code>0.4</code>. Thus, we can compute whether in total we have a predominant positive or negative weight.</p>
<p><a href="https://neptune.ai/blog/sentiment-analysis-python-textblob-vs-vader-vs-flair#:~:text=methods%20and%20packages.-,Rule%2Dbased%20sentiment%20analysis,-Rule%2Dbased%20sentiment">See more Here</a></p>
</div>
</div>
<div class="admonition exercise long tag-text-exercise tag-long-text editable" data-slug="modules/07-lambda/sentiment_analysis/long_3" id="long_3_0">
<p class="admonition-title">Question 3<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Have you trained or have any idea how to train an ML model for sentiment analysis? Explain how.</p>
<div class="form-elements">
<div class="grow-wrap"><textarea name="data"></textarea></div>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>Considering a manually classified database, we can pre-process the text, removing punctuations and stop-words. Then we can tokenize the text and train a Naive Bayes classifier. You probably did this in Ciência dos dados (you created the Python code to calculate probabilities yourself) and Megadados (using Spark) courses.</p>
<p>See more <a href="https://scikit-learn.org/stable/modules/naive_bayes.html">Here</a> and <a href="https://en.wikipedia.org/wiki/Naive_Bayes_classifier">Here</a>.</p>
</div>
</div>
<p>Instead of training our own sentiment analysis model, we will use a ready-made library that already provides this functionality.</p>
<h2 id="textblob-library">Textblob library</h2>
<p>We chose to use the <code>textblob</code> library for sentiment analysis. It provides a series of features such as:</p>
<ul>
<li>Calculation of n-grams.</li>
<li>Tokenization</li>
<li>Spelling Correction</li>
<li>Sentiment Analysis</li>
<li>etc.</li>
</ul>
<p>See the documentation <a href="https://textblob.readthedocs.io/en/dev/quickstart.html#sentiment-analysis">here</a> and <a href="https://textblob.readthedocs.io/en/dev/api_reference.html#textblob.blob.TextBlob.sentiment">here</a>.</p>
<p>Let's see an example of how to use the library. But first, do the installation:</p>
<div class="termy">

    <div class="language-console highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">$ </span>pip<span class="w"> </span>install<span class="w"> </span>textblob
</code></pre></div>

</div>

<p><br>
Let's use <code>textblob</code> to obtain the <em>polarity</em> of three different texts:</p>
<div class="language-python highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">from</span> <span class="nn">textblob</span> <span class="kn">import</span> <span class="n">TextBlob</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">text1</span> <span class="o">=</span> <span class="s2">&quot;What a damn company. You guys are the worst, you can&#39;t meet the deadline.&quot;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="n">text2</span> <span class="o">=</span> <span class="s2">&quot;Hello everybody&quot;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="n">text3</span> <span class="o">=</span> <span class="s2">&quot;I am so happy to be here&quot;</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">blob1</span> <span class="o">=</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">text1</span><span class="p">)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="n">blob2</span> <span class="o">=</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">blob3</span> <span class="o">=</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">text3</span><span class="p">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Polarity of text1: </span><span class="si">{</span><span class="n">blob1</span><span class="o">.</span><span class="n">polarity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Polarity of text2: </span><span class="si">{</span><span class="n">blob2</span><span class="o">.</span><span class="n">polarity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Polarity of text3: </span><span class="si">{</span><span class="n">blob3</span><span class="o">.</span><span class="n">polarity</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip! 1</p>
<p>Here it is the repository of textblob: <a href="https://github.com/sloria/textblob">https://github.com/sloria/textblob</a></p>
</div>
<p>Run this code locally and test it with other sentences. Then proceed to the next topic.</p>


</section>
          
        
      </main>
      <footer class="ah-footer ah-typeset">
        <div class="ah-footer-nav">
          
            <a href="../api_gateway/"
               class="ah-prev"
               title="Api gateway">
              <span class="nav-label">Anterior</span>
              <span class="nav-title">Api gateway</span>
            </a>
          
          
            <a href="../sa_lambda_function/"
               class="ah-next"
               title="Sa lambda function">
              <span class="nav-label">Próximo</span>
              <span class="nav-title">Sa lambda function</span>
            </a>
          
        </div>
      </footer>
    </div>
    
      <script src="../../../js/tabs.js"></script><script src="../../../js/termynal.js"></script><script src="../../../js/custom.js"></script>
    
  </body>
</html>