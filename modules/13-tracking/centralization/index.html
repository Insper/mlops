<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
      
        <title>Centralization - MLOps & Interviews</title>
      
    
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed:700|Oxygen+Mono|Source+Sans+Pro:700|Source+Serif+Pro&amp;display=swap">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <script>
      // SETUP GLOBAL CONSTANTS
      var base_url = '../../..';
      
      var telemetryEnabled = false;
      var backendUrl = "";
      var courseSlug = "";
      
      
      var dashboardEnabled = false;
      var tagTree = {};
      

      // SETUP PLUGIN
      window.initialized = false;
      if (!window.initializers) window.initializers = [];
      window.registerInitializer = (initialize) => {
        if (window.initialized) initialize();
        else window.initializers.push(initialize);
      };
    </script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="https://unpkg.com/hyperscript.org"></script>
    <script src="https://unpkg.com/htmx.org@1.8.4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="../../../assets/js/main.js"></script>
    
    <link rel="stylesheet" href="../../../css/termynal.css">
  </head>
  <body>
    <div class="ah-main-container">
      <header class="ah-header">
        <button class="ah-menu-btn ah-button ah-button--borderless"
                aria-label="toggle menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/>
</svg>
        </button>
        <a href="../../.."
           title="MLOps &amp; Interviews"
           class="ah-logo"
           aria-label="MLOps & Interviews">
          MLOps &amp; Interviews
        </a>
        <div class="ah-header--right">
          
          
          
          <button id="resetHandoutButton">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
</svg></span>
          </button>
          

          
        </div>
      </header>
      <nav class="ah-navigation preload">
        <div class="ah-nav-container">
          <button class="ah-menu-btn ah-button ah-button--borderless close-menu"
                  aria-label="close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/>
</svg>
          </button>
          <ul class="ah-nav-body">
            
              
  
    <li>
      <a href="../../..">Home</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../about/">About</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../deadlines/">Deadlines</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../contributions/">Contributions</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../project/project/">Project</a>
    </li>
  

            
              
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Content</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">01 - Introduction</span>
    <ul>
      
        
  
    <li>
      <a href="../../01-intro/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01/">Aps01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">02 - Deploy: first try!</span>
    <ul>
      
        
  
    <li>
      <a href="../../02-api/api_deploy/">Api deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">03 - Batch prediction</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/data_formats/">Data formats</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/practicing/">Practicing</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/sql/">Sql</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/db_tool/">Db tool</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/dot_env/">Dot env</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/aps02_sql/">Aps02 sql</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">04 - Interview 01</span>
    <ul>
      
        
  
    <li>
      <a href="../../04-int01/faq/">Faq</a>
    </li>
  

      
        
  
    <li>
      <a href="../../04-int01/int01/">Int01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">05 - Docker</span>
    <ul>
      
        
  
    <li>
      <a href="../../05-docker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/s3/">S3</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/docker/">Docker</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">06 - Message Broker</span>
    <ul>
      
        
  
    <li>
      <a href="../../06-message-broker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../06-message-broker/rabbitmq/">Rabbitmq</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">07 - Lambda Functions</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/aws_lambda/">Aws lambda</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_practicing/">Lambda practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/api_gateway/">Api gateway</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/sentiment_analysis/">Sentiment analysis</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/sa_lambda_function/">Sa lambda function</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_layer/">Lambda layer</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 3</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/lambda_quotas/">Lambda quotas</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_and_docker/">Lambda and docker</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/aps03_lambda/">Aps03 lambda</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">08 - Queues</span>
    <ul>
      
        
  
    <li>
      <a href="../../08-queue/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/concurrent_execution/">Concurrent execution</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_practicing/">Sqs practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_and_lambda/">Sqs and lambda</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">09 - Interview 02</span>
    <ul>
      
        
  
    <li>
      <a href="../../09-int02/int02/">Int02</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">10 - Documentation</span>
    <ul>
      
        
  
    <li>
      <a href="../../10-documentation/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/code_documentation/">Code documentation</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/fast_api_docs/">Fast api docs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/ml_canvas/">Ml canvas</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">11 - Logging</span>
    <ul>
      
        
  
    <li>
      <a href="../../11-logging/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/python_logging/">Python logging</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/read_aws_logs/">Read aws logs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/write_logs_to_s3/">Write logs to s3</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">12 - CI/CD</span>
    <ul>
      
        
  
    <li>
      <a href="../../12-ci-cd/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/testing/">Testing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/auto_deploy/">Auto deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">13 - Tracking</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../mlflow/">Mlflow</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  

    <li class="active ah-togglable-item opened">
      <span class="ah-togglable-handle">Centralization</span>
      <ul>
        
          
            
            
              <li class="ah-toc-item">
                <a href="#new-scenario">New scenario!</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#create-database">Create Database</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#create-bucket">Create Bucket</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#configure-mlflow-server">Configure MLflow Server</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#use-mlflow-server">Use MLflow Server</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#interact-with-friends">Interact with friends!</a>
              </li>
            
        
      </ul>
    </li>
  

      
        
  
    <li>
      <a href="../model_registry/">Model registry</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">14 - Interview 03</span>
    <ul>
      
        
  
    <li>
      <a href="../../14-int03/int03/">Int03</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">15 - Monitoring</span>
    <ul>
      
        
  
    <li>
      <a href="../../15-monitoring/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/metrics/">Metrics</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/model_degradation/">Model degradation</a>
    </li>
  

      
        
  
    <li>
      <a href="../../15-monitoring/data_drift_methods/">Data drift methods</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

            
          </ul>
        </div>
      </nav>
      <main class="ah-content ah-typeset">
        
          <div class="ah-title-box">
            <ul class="ah-breadcrumbs">
              
                
                  
                    <li>Content</li>
                  
                
                  
                    <li>13 - Tracking</li>
                  
                
                  
                    <li>Part 2</li>
                  
                
                <li></li>
            </ul>
            
            
          </div>
          
            <section class="progress-section show">
<h1 id="centralization">Centralization</h1>
<p>In the last class we saw how to use <em>MLflow</em> to track experiments.</p>
<div class="admonition exercise text short tag-short-text tag-text-exercise editable" data-slug="modules/13-tracking/centralization/short_1" id="short_1_0">
<p class="admonition-title">Question 1<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Where was the information about the runs (metrics, parameters, artifacts) stored?</p>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>In a <code>mlruns</code> folder created by <em>MLflow</em>.</p>
</div>
</div>
<div class="admonition exercise text long tag-long-text tag-text-exercise editable" data-slug="modules/13-tracking/centralization/long_2" id="long_2_0">
<p class="admonition-title">Question 2<button class="editable-button"></button></p>
<form class="exercise-form">
<p>How will local storage of experiments impact a project developed by multiple ML scientists and engineers?</p>
<div class="form-elements">
<div class="grow-wrap"><textarea name="data"></textarea></div>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>We may have a problem, as one will not have vision of what was attempted by the other.</p>
</div>
</div>
<p>It would be appropriate to keep information about experiments centrally. Thus, whenever an experiment is carried out by a data scientist, the result will be available for analysis by others.</p>
<div class="admonition exercise text short tag-short-text tag-text-exercise editable" data-slug="modules/13-tracking/centralization/short_3" id="short_3_0">
<p class="admonition-title">Question 3<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Can you think of any solution to store metrics and parameter data centrally?</p>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>In a relational database!</p>
</div>
</div>
<div class="admonition exercise text short tag-short-text tag-text-exercise editable" data-slug="modules/13-tracking/centralization/short_4" id="short_4_0">
<p class="admonition-title">Question 4<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Can you think of any solution to store artifacts, such as images and files, centrally?</p>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>S3 bucket!</p>
</div>
</div>
<h2 id="new-scenario">New scenario!</h2>
<p>Let's propose a reconfiguration of the scenario from last class. In it, all structured information about the experiments will be stored in a PostgreSQL database, while the artifacts will be stored in an S3 bucket.</p>
<p><img alt="" src="../mlflow_integration.png" /></p>
<div class="admonition info">
<p class="admonition-title">Important!</p>
<p>Now the results of the experiments will be available to everyone on the team!</p>
</div>
<p>The MLFlow server could also run centrally (like on an EC2 instance). However, we will keep it running locally, but storing data centrally.</p>
<h2 id="create-database">Create Database</h2>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_1" id="exercise_1_0">
<p class="admonition-title">Question 5</p>
<form class="exercise-form">
<p>Using the database credentials provided by the teacher, make a connection to the database using DBeaver and create a database with the name following the pattern <code>mlflow_INSPER_USERNAME</code>.</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Replace <code>INSPER_USERNAME</code> with your Insper username!</p>
<p>When creating the database, use the <strong>tablespace</strong> <code>Default</code> instead of <code>pg_default</code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip! 1</p>
<p>When creating the connection in DBeaver, in the second tab <code>"PostgreSQL"</code>, check the <code>"Show all databases"</code> option.</p>
<p><img alt="" src="../dbeaver_all_databases.png" /></p>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<h2 id="create-bucket">Create Bucket</h2>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_2" id="exercise_2_0">
<p class="admonition-title">Question 6</p>
<form class="exercise-form">
<p>Create a bucket in AWS S3 to store your experiment artifacts.</p>
<p>As we already have the AWS CLI configured, we will use it for this task. If you want, you can also use Python codes for this task!</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Replace <code>INSPER-USERNAME</code> with your Insper username to configure S3 Bucket name properly.</p>
</div>
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>create-bucket<span class="w"> </span>--bucket<span class="w"> </span>mlflow-exp-tracking-INSPER-USERNAME<span class="w"> </span>--region<span class="w"> </span>us-east-2<span class="w"> </span>--create-bucket-configuration<span class="w"> </span><span class="nv">LocationConstraint</span><span class="o">=</span>us-east-2
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<h2 id="configure-mlflow-server">Configure MLflow Server</h2>
<p>Now let's start a local MLflow server that will connect to the database and the S3 bucket.</p>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_3" id="exercise_3_0">
<p class="admonition-title">Question 7</p>
<form class="exercise-form">
<p>Start the server with:</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Replace <code>INSPER-USERNAME</code> with your Insper username to configure S3 Bucket name properly.</p>
</div>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Fill in the database credentials provided by the professor: <code>USERNAME</code>, <code>PASSWORD</code>, <code>HOST</code>, <code>PORT</code>.</p>
<p>For the <code>DATABASE</code>, use the one created by you, following the pattern <code>mlflow_INSPER_USERNAME</code>.</p>
</div>
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gp">$ </span>mlflow<span class="w"> </span>server<span class="w"> </span>--backend-store-uri<span class="w"> </span>postgresql://USERNAME:PASSWORD@HOST:PORT/DATABASE<span class="w"> </span>--default-artifact-root<span class="w"> </span>s3://mlflow-exp-tracking-INSPER-USERNAME
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<h2 id="use-mlflow-server">Use MLflow Server</h2>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_4" id="exercise_4_0">
<p class="admonition-title">Question 8</p>
<form class="exercise-form">
<p>We will continue working on the same project as last class.</p>
<p>Make a copy of the past class folder.</p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<p>Let's configure the copy of the previous class project to connect to the server using the URL. Thus, MLflow will make requests to the REST API of the MLflow server that is running locally and, in turn, the server will store the experiment logs in PostgreSQL and AWS S3.</p>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_5" id="exercise_5_0">
<p class="admonition-title">Question 9</p>
<form class="exercise-form">
<p>Change the code in the <code>train.py</code> file, in the <code>main</code> function, so that it uses the MLFlow server URL:</p>
<div class="admonition danger">
<p class="admonition-title">Attention!</p>
<p>Add the line with <code>mlflow.set_tracking_uri</code> and keep the others!</p>
</div>
<div class="language-python highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    <span class="n">mlflow</span><span class="o">.</span><span class="n">set_tracking_uri</span><span class="p">(</span><span class="s2">&quot;http://localhost:5000&quot;</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    <span class="n">mlflow</span><span class="o">.</span><span class="n">set_experiment</span><span class="p">(</span><span class="s2">&quot;churn-exp&quot;</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip! 2</p>
<p>Check if your server was actually started on port 5000.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip! 3</p>
<p>Instead of leaving the URL hardcoded, try setting an <strong>environment variable</strong>.</p>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_6" id="exercise_6_0">
<p class="admonition-title">Question 10</p>
<form class="exercise-form">
<p>From the root directory, test the code with:
<p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="gp">$ </span>python<span class="w"> </span>src/train.py
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_7" id="exercise_7_0">
<p class="admonition-title">Question 11</p>
<form class="exercise-form">
<p>Go to <a href="http://localhost:5000">http://localhost:5000</a> in your browser and check if the experiment results are available.</p>
<p>Make sure your artifact URLs point to S3.</p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_8" id="exercise_8_0">
<p class="admonition-title">Question 12</p>
<form class="exercise-form">
<p>In DBeaver, explore the created tables and their contents.</p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_9" id="exercise_9_0">
<p class="admonition-title">Question 13</p>
<form class="exercise-form">
<p>List the contents of the bucket and check the created objects.</p>
<div class="admonition danger">
<p class="admonition-title">Important</p>
<p>Replace <code>INSPER-USERNAME</code> with your Insper username to configure S3 Bucket name properly.</p>
</div>
<p><p>
<div class="termy"></p>
<div class="language-console highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="gp">$ </span>aws<span class="w"> </span>s3api<span class="w"> </span>list-objects-v2<span class="w"> </span>--bucket<span class="w">  </span>mlflow-exp-tracking-INSPER-USERNAME
</code></pre></div>
<p></div>
</p></p>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>
<h2 id="interact-with-friends">Interact with friends!</h2>
<div class="admonition exercise self-progress" data-slug="modules/13-tracking/centralization/exercise_10" id="exercise_10_0">
<p class="admonition-title">Question 14</p>
<form class="exercise-form">
<p>Talk to your colleagues to use the same database and bucket.</p>
<p>This way you will be able to see in practice that you can integrate the experiments and visualize each other's results.</p>
<div class="admonition tip">
<p class="admonition-title">Tip! 4</p>
<p>You can agree to run experiments with different names if you don't want to work on the same one!</p>
</div>
<div class="form-elements">
<input type="hidden" name="data" value="OK" />
<input class="ah-button ah-button--primary" type="submit" name="Enviar" value="Marcar como feito" />
</div>
</form>
</div>


</section>
          
        
      </main>
      <footer class="ah-footer ah-typeset">
        <div class="ah-footer-nav">
          
            <a href="../mlflow/"
               class="ah-prev"
               title="Mlflow">
              <span class="nav-label">Anterior</span>
              <span class="nav-title">Mlflow</span>
            </a>
          
          
            <a href="../model_registry/"
               class="ah-next"
               title="Model registry">
              <span class="nav-label">Próximo</span>
              <span class="nav-title">Model registry</span>
            </a>
          
        </div>
      </footer>
    </div>
    
      <script src="../../../js/tabs.js"></script><script src="../../../js/termynal.js"></script><script src="../../../js/custom.js"></script>
    
  </body>
</html>