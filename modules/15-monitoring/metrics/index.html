<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
      
        <title>Metrics - MLOps & Interviews</title>
      
    
    <link rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Fira+Sans+Extra+Condensed:700|Oxygen+Mono|Source+Sans+Pro:700|Source+Serif+Pro&amp;display=swap">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <script>
      // SETUP GLOBAL CONSTANTS
      var base_url = '../../..';
      
      var telemetryEnabled = false;
      var backendUrl = "";
      var courseSlug = "";
      
      
      var dashboardEnabled = false;
      var tagTree = {};
      

      // SETUP PLUGIN
      window.initialized = false;
      if (!window.initializers) window.initializers = [];
      window.registerInitializer = (initialize) => {
        if (window.initialized) initialize();
        else window.initializers.push(initialize);
      };
    </script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="https://unpkg.com/hyperscript.org"></script>
    <script src="https://unpkg.com/htmx.org@1.8.4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <script src="../../../assets/js/main.js"></script>
    
    <link rel="stylesheet" href="../../../css/termynal.css">
  </head>
  <body>
    <div class="ah-main-container">
      <header class="ah-header">
        <button class="ah-menu-btn ah-button ah-button--borderless"
                aria-label="toggle menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/>
</svg>
        </button>
        <a href="../../.."
           title="MLOps &amp; Interviews"
           class="ah-logo"
           aria-label="MLOps & Interviews">
          MLOps &amp; Interviews
        </a>
        <div class="ah-header--right">
          
          
          
          <button id="resetHandoutButton">
            <span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"/>
</svg></span>
          </button>
          

          
        </div>
      </header>
      <nav class="ah-navigation preload">
        <div class="ah-nav-container">
          <button class="ah-menu-btn ah-button ah-button--borderless close-menu"
                  aria-label="close menu">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
  <!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. -->
  <path d="M310.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 210.7 54.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L114.7 256 9.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L160 301.3 265.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L205.3 256 310.6 150.6z"/>
</svg>
          </button>
          <ul class="ah-nav-body">
            
              
  
    <li>
      <a href="../../..">Home</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../about/">About</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../deadlines/">Deadlines</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../contributions/">Contributions</a>
    </li>
  

            
              
  
    <li>
      <a href="../../../project/project/">Project</a>
    </li>
  

            
              
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">Content</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">01 - Introduction</span>
    <ul>
      
        
  
    <li>
      <a href="../../01-intro/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../01-intro/aps01/">Aps01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">02 - Deploy: first try!</span>
    <ul>
      
        
  
    <li>
      <a href="../../02-api/api_deploy/">Api deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">03 - Batch prediction</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/data_formats/">Data formats</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/practicing/">Practicing</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../03-batch/sql/">Sql</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/db_tool/">Db tool</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/dot_env/">Dot env</a>
    </li>
  

      
        
  
    <li>
      <a href="../../03-batch/aps02_sql/">Aps02 sql</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">04 - Interview 01</span>
    <ul>
      
        
  
    <li>
      <a href="../../04-int01/faq/">Faq</a>
    </li>
  

      
        
  
    <li>
      <a href="../../04-int01/int01/">Int01</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">05 - Docker</span>
    <ul>
      
        
  
    <li>
      <a href="../../05-docker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/s3/">S3</a>
    </li>
  

      
        
  
    <li>
      <a href="../../05-docker/docker/">Docker</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">06 - Message Broker</span>
    <ul>
      
        
  
    <li>
      <a href="../../06-message-broker/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../06-message-broker/rabbitmq/">Rabbitmq</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">07 - Lambda Functions</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/aws_lambda/">Aws lambda</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_practicing/">Lambda practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/api_gateway/">Api gateway</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/sentiment_analysis/">Sentiment analysis</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/sa_lambda_function/">Sa lambda function</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_layer/">Lambda layer</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 3</span>
    <ul>
      
        
  
    <li>
      <a href="../../07-lambda/lambda_quotas/">Lambda quotas</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/lambda_and_docker/">Lambda and docker</a>
    </li>
  

      
        
  
    <li>
      <a href="../../07-lambda/aps03_lambda/">Aps03 lambda</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">08 - Queues</span>
    <ul>
      
        
  
    <li>
      <a href="../../08-queue/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/concurrent_execution/">Concurrent execution</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_practicing/">Sqs practicing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../08-queue/sqs_and_lambda/">Sqs and lambda</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">09 - Interview 02</span>
    <ul>
      
        
  
    <li>
      <a href="../../09-int02/int02/">Int02</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">10 - Documentation</span>
    <ul>
      
        
  
    <li>
      <a href="../../10-documentation/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/code_documentation/">Code documentation</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/fast_api_docs/">Fast api docs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../10-documentation/ml_canvas/">Ml canvas</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">11 - Logging</span>
    <ul>
      
        
  
    <li>
      <a href="../../11-logging/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/python_logging/">Python logging</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/read_aws_logs/">Read aws logs</a>
    </li>
  

      
        
  
    <li>
      <a href="../../11-logging/write_logs_to_s3/">Write logs to s3</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">12 - CI/CD</span>
    <ul>
      
        
  
    <li>
      <a href="../../12-ci-cd/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/testing/">Testing</a>
    </li>
  

      
        
  
    <li>
      <a href="../../12-ci-cd/auto_deploy/">Auto deploy</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">13 - Tracking</span>
    <ul>
      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 1</span>
    <ul>
      
        
  
    <li>
      <a href="../../13-tracking/intro/">Intro</a>
    </li>
  

      
        
  
    <li>
      <a href="../../13-tracking/mlflow/">Mlflow</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">Part 2</span>
    <ul>
      
        
  
    <li>
      <a href="../../13-tracking/centralization/">Centralization</a>
    </li>
  

      
        
  
    <li>
      <a href="../../13-tracking/model_registry/">Model registry</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item">
    <span class="ah-togglable-handle">14 - Interview 03</span>
    <ul>
      
        
  
    <li>
      <a href="../../14-int03/int03/">Int03</a>
    </li>
  

      
    </ul>
  </li>

      
        
  <li class="ah-togglable-item opened">
    <span class="ah-togglable-handle">15 - Monitoring</span>
    <ul>
      
        
  
    <li>
      <a href="../intro/">Intro</a>
    </li>
  

      
        
  

    <li class="active ah-togglable-item opened">
      <span class="ah-togglable-handle">Metrics</span>
      <ul>
        
          
            
            
              <li class="ah-toc-item">
                <a href="#classification">Classification</a>
              </li>
            
              <li class="ah-toc-item">
                <a href="#regression">Regression</a>
              </li>
            
        
      </ul>
    </li>
  

      
        
  
    <li>
      <a href="../model_degradation/">Model degradation</a>
    </li>
  

      
        
  
    <li>
      <a href="../data_drift_methods/">Data drift methods</a>
    </li>
  

      
    </ul>
  </li>

      
    </ul>
  </li>

            
          </ul>
        </div>
      </nav>
      <main class="ah-content ah-typeset">
        
          <div class="ah-title-box">
            <ul class="ah-breadcrumbs">
              
                
                  
                    <li>Content</li>
                  
                
                  
                    <li>15 - Monitoring</li>
                  
                
                <li></li>
            </ul>
            
            
          </div>
          
            <section class="progress-section show">
<h1 id="performance-metrics">Performance metrics</h1>
<h2 id="classification">Classification</h2>
<p>Some performance metris used for classification problems are:</p>
<ul>
<li><strong>Accuracy</strong>: Accuracy measures the proportion of <strong>correctly classified</strong> instances out of the <strong>total number</strong> of instances.</li>
</ul>
<p>$$
A = (TP + TN) / (TP + TN + FP + FN)
$$</p>
<ul>
<li><strong>Precision</strong>: Precision measures the proportion of <strong>true positive</strong> predictions out of <strong>all positive</strong> predictions. It focuses on the correctness of positive predictions.</li>
</ul>
<p>$$
P = TP / (TP + FP)
$$</p>
<ul>
<li><strong>Recall</strong> (Sensitivity or True Positive Rate): Recall measures the proportion of <strong>true positive</strong> predictions out of <strong>all actual positive</strong> instances.</li>
</ul>
<p>$$
R = TP / (TP + FN)
$$</p>
<ul>
<li><strong>Specificity</strong>: Specificity measures the proportion of <strong>true negative</strong> predictions out of <strong>all actual negative</strong> instances.</li>
</ul>
<p>$$
S = TN / (TN + FP)
$$</p>
<ul>
<li><strong>F1 Score</strong>: The F1 score combines <strong>precision</strong> and <strong>recall</strong> into a single metric. It provides a <strong>balanced measure</strong> between precision and recall.</li>
</ul>
<p>$$
F = 2 * (P * R) / (P + R)
$$</p>
<ul>
<li><strong>Area Under the ROC Curve</strong>: AUC-ROC is a commonly used metric for binary classification models. It measures the model's ability to distinguish between positive and negative instances across different thresholds.</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip! 1</p>
<p>A classification problem refers to the task of categorizing or classifying input data into discrete classes or categories.</p>
</div>
<div class="admonition exercise text long tag-text-exercise tag-long-text editable" data-slug="modules/15-monitoring/metrics/long_1" id="long_1_0">
<p class="admonition-title">Question! 1<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Give an example of a situation where we should look at <strong>precision</strong> and <strong>recall</strong> and not just <strong>accuracy</strong>.</p>
<div class="form-elements">
<div class="grow-wrap"><textarea name="data"></textarea></div>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>Let's assume that we are developing a classification model to detect a rare disease in patients. In this case, the disease may only affect a small proportion of the population, for example, 1%. If we build a model that labels all patients as not having the disease, we will have a high accuracy of 99%, as the majority of patients do not have the disease.</p>
<p>However, accuracy alone is not sufficient to evaluate the effectiveness of the model in this context. The goal is to maximize the correct identification of patients with the disease (recall) and minimize the cases where the model erroneously labels a healthy patient as having the disease (precision).</p>
</div>
</div>
<h2 id="regression">Regression</h2>
<p>Some performance metris used for regression problems are:</p>
<ul>
<li><strong>Mean Absolute Error</strong> (MAE): MAE measures the average absolute difference between the predicted and actual values. It provides a straightforward measure of the model's overall performance.</li>
</ul>
<p>$$
MAE = \frac{1}{n} \sum_{i=1}^{n} |y_i - \hat{y}_i|
$$</p>
<ul>
<li><strong>Mean Squared Error</strong> (MSE): MSE measures the average squared difference between the predicted and actual values. It amplifies the impact of larger errors compared to MAE.</li>
</ul>
<p>$$
MSE = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2
$$</p>
<ul>
<li><strong>Root Mean Squared Error</strong> (RMSE): RMSE is the square root of MSE and provides a measure of the average magnitude of the residuals.</li>
</ul>
<p>$$
RMSE = \sqrt{MSE}
$$</p>
<ul>
<li><strong>R-squared</strong> (Coefficient of Determination): R-squared represents the proportion of the variance in the dependent variable that is predictable from the independent variables.</li>
</ul>
<p>$$
R^2 = 1 - \frac{SSR}{SST}
$$</p>
<p>where $SSR$ is the sum of squared residuals and $SST$ is the total sum of squares:</p>
<p>$$
SSR = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2
$$</p>
<p>$$
SST = \sum_{i=1}^{n} (y_i - \bar{y})^2
$$</p>
<ul>
<li><strong>Mean Absolute Percentage Error</strong> (MAPE): MAPE measures the average percentage difference between the predicted and actual values.</li>
</ul>
<p>$$
MAPE = \frac{1}{n} \sum_{i=1}^{n} \left|\frac{y_i - \hat{y}_i}{y_i}\right| \times 100
$$</p>
<ul>
<li><strong>Adjusted R-squared</strong>: Adjusted R-squared adjusts the R-squared value by the number of predictors in the model. It penalizes the addition of unnecessary predictors and provides a more accurate measure of the model's goodness of fit.</li>
</ul>
<p>$$
\text{Adjusted } R^2 = 1 - \left[ \frac{(1 - R^2) \times (n - 1)}{n - p - 1} \right]
$$</p>
<p>where $n$ is the sample size and $p$ is the number of predictors.</p>
<div class="admonition tip">
<p class="admonition-title">Tip! 2</p>
<p>A regression problem refers to the task of predicting a continuous numerical value.</p>
</div>
<div class="admonition exercise text short tag-text-exercise tag-short-text editable" data-slug="modules/15-monitoring/metrics/short_2" id="short_2_0">
<p class="admonition-title">Question! 2<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Give a reason to use $RMSE$ instead of $MSE$.</p>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>$RMSE$ is commonly used as it is in the same unit as the target variable.</p>
</div>
</div>
<div class="admonition exercise text short tag-text-exercise tag-short-text editable" data-slug="modules/15-monitoring/metrics/short_3" id="short_3_0">
<p class="admonition-title">Question! 3<button class="editable-button"></button></p>
<form class="exercise-form">
<p>Give a reason to use $MAPE$ instead of $RMSE$.</p>
<div class="form-elements">
<input type="text" value="" name="data"/>

<input class="ah-button ah-button--primary" type="submit" value="Enviar"/>
</div>
</form>
<div class="admonition answer no-indent">
<p class="admonition-title">Answer!</p>
<p>$MAPE$ is often used in situations where relative errors are more important than absolute errors.</p>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip! 3</p>
<p>The main advantage of these performance metrics is that they are <strong>domain agnostic</strong>, so the data scientist likely feels comfortable setting thresholds for them!</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip! 4</p>
<p>But it is also important to choose metrics that are aligned with the business goal. Talk to the business areas to check this!</p>
</div>


</section>
          
        
      </main>
      <footer class="ah-footer ah-typeset">
        <div class="ah-footer-nav">
          
            <a href="../intro/"
               class="ah-prev"
               title="Intro">
              <span class="nav-label">Anterior</span>
              <span class="nav-title">Intro</span>
            </a>
          
          
            <a href="../model_degradation/"
               class="ah-next"
               title="Model degradation">
              <span class="nav-label">Próximo</span>
              <span class="nav-title">Model degradation</span>
            </a>
          
        </div>
      </footer>
    </div>
    
      <script src="../../../js/tabs.js"></script><script src="../../../js/termynal.js"></script><script src="../../../js/custom.js"></script>
    
  </body>
</html>